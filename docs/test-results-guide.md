# Test Results Guide - Where to Find Test Outputs

## Overview

This guide explains where to find test results, coverage reports, and how to view them in the Smart Recipe Generator project.

---

## 1. Test Results Location

### 1.1 Unit Test Results (Jest)

#### Console Output
When you run tests, results are displayed in the terminal:

```bash
npm run all_tests
```

**Output Location**: Terminal/Console
**Example Output**:
```
PASS tests/lib/openai.test.ts
PASS tests/utils/utils.test.ts
FAIL tests/pages/api/validate-ingredient.test.ts
  âœ• shall reject requests that do not use the POST method

Test Suites: 30 passed, 21 failed, 51 total
Tests:       223 passed, 38 failed, 261 total
Snapshots:   10 passed, 6 failed, 16 total
Time:        29.645 s
```

#### Coverage Reports (HTML)

**Location**: `coverage/lcov-report/index.html`

**How to View**:
1. Run coverage command:
   ```bash
   npm run coverage
   ```
2. Open the HTML report in your browser:
   ```bash
   # Windows
   start coverage/lcov-report/index.html
   
   # Mac/Linux
   open coverage/lcov-report/index.html
   
   # Or simply navigate to the file and open it
   ```

**Coverage Report Contents**:
- **Main Dashboard**: `coverage/lcov-report/index.html`
  - Overall coverage statistics
  - File-by-file coverage breakdown
  - Interactive navigation
  
- **File-Specific Reports**: 
  - `coverage/lcov-report/components/` - Component coverage
  - `coverage/lcov-report/pages/` - Page coverage
  - `coverage/lcov-report/lib/` - Library coverage
  - `coverage/lcov-report/utils/` - Utility coverage

**Current Coverage Statistics** (from last run):
- **Statements**: 94.49% (5754/6089)
- **Branches**: 85.4% (679/795)
- **Functions**: 83.18% (188/226)
- **Lines**: 94.49% (5754/6089)

#### Coverage Data Files

**Location**: `coverage/` directory

**Files Generated**:
- `coverage/lcov.info` - LCOV format coverage data
- `coverage/coverage-final.json` - JSON format coverage data
- `coverage/clover.xml` - Clover XML format (for CI/CD tools)
- `coverage/lcov-report/` - HTML report directory

---

### 1.2 E2E Test Results (Cypress)

#### Console Output

**Command**:
```bash
npm run test:e2e
```

**Output Location**: Terminal/Console
**Example Output**:
```
âœ“ Landing page (1234ms)
âœ“ Login flow (2341ms)
âœ“ Recipe creation (5678ms)
âœ“ Recipe card actions (3456ms)
âœ“ Infinite scroll (1234ms)
âœ“ Search and filtering (2345ms)
âœ“ Recipe sorting (1234ms)

7 passing (17s)
```

#### Cypress Test Runner (Interactive)

**Command**:
```bash
npx cypress open
```

**Features**:
- Interactive test runner
- Real-time test execution
- Browser preview
- Step-by-step test execution
- Debugging capabilities

#### Screenshots and Videos (Not Currently Enabled)

**Current Status**: Screenshots and videos are **NOT** currently generated by default.

**To Enable Screenshots**:
Update `cypress.config.ts`:
```typescript
import { defineConfig } from "cypress";

export default defineConfig({
  e2e: {
    baseUrl: "http://localhost:3000",
    screenshotOnRunFailure: true, // Enable screenshots on failure
    video: true, // Enable video recording
    videosFolder: "cypress/videos", // Video output directory
    screenshotsFolder: "cypress/screenshots", // Screenshot output directory
  },
});
```

**Screenshot Location** (when enabled):
- `cypress/screenshots/` - Screenshots of failed tests

**Video Location** (when enabled):
- `cypress/videos/` - Video recordings of test runs

**Note**: Screenshots and videos are **NOT** in the repository (gitignored by default).

---

## 2. Viewing Test Results

### 2.1 Viewing Coverage Report

#### Method 1: Open in Browser

1. **Generate Coverage Report**:
   ```bash
   npm run coverage
   ```

2. **Open HTML Report**:
   - **Windows**: Double-click `coverage/lcov-report/index.html`
   - **Mac**: Right-click â†’ Open With â†’ Browser
   - **Linux**: `xdg-open coverage/lcov-report/index.html`

3. **Navigate the Report**:
   - Click on file names to see line-by-line coverage
   - Green lines = covered by tests
   - Red lines = not covered by tests
   - Yellow lines = partially covered

#### Method 2: View in VS Code

1. Install the "Coverage Gutters" extension
2. Run coverage: `npm run coverage`
3. Click "Watch" in the Coverage Gutters extension
4. Coverage indicators will appear in your editor

#### Method 3: CI/CD Integration

The coverage data can be integrated with CI/CD tools:
- `coverage/lcov.info` - For services like Codecov, Coveralls
- `coverage/clover.xml` - For Jenkins, SonarQube

---

### 2.2 Viewing Test Execution Results

#### Jest Test Results

**In Terminal**:
```bash
npm run all_tests
```

**Output Includes**:
- âœ… Pass/fail status for each test
- â±ï¸ Execution time
- ğŸ“Š Test statistics
- âŒ Error messages for failed tests
- ğŸ“¸ Snapshot test results

#### Cypress Test Results

**In Terminal** (Headless Mode):
```bash
npm run test:e2e
```

**In Browser** (Interactive Mode):
```bash
npx cypress open
```

**Output Includes**:
- âœ… Pass/fail status
- â±ï¸ Execution time per test
- ğŸ“Š Total test statistics
- ğŸ” Detailed error messages
- ğŸ“¸ Screenshots (if enabled)
- ğŸ¥ Videos (if enabled)

---

## 3. Test Output Files

### 3.1 Generated Files

#### Coverage Report Files
```
coverage/
â”œâ”€â”€ lcov-report/
â”‚   â”œâ”€â”€ index.html          # Main coverage dashboard
â”‚   â”œâ”€â”€ components/         # Component coverage reports
â”‚   â”œâ”€â”€ pages/              # Page coverage reports
â”‚   â”œâ”€â”€ lib/                # Library coverage reports
â”‚   â””â”€â”€ utils/              # Utility coverage reports
â”œâ”€â”€ lcov.info               # LCOV format data
â”œâ”€â”€ coverage-final.json     # JSON format data
â””â”€â”€ clover.xml              # XML format data
```

#### Snapshot Test Files
```
tests/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ __snapshots__/
â”‚       â”œâ”€â”€ Layout.test.tsx.snap
â”‚       â”œâ”€â”€ Loading.test.tsx.snap
â”‚       â””â”€â”€ withAuth.test.tsx.snap
â””â”€â”€ pages/
    â””â”€â”€ __snapshots__/
        â””â”€â”€ [snapshot files]
```

#### Cypress Output (When Enabled)
```
cypress/
â”œâ”€â”€ screenshots/            # Screenshots of failed tests
â””â”€â”€ videos/                 # Video recordings of test runs
```

### 3.2 Git Ignored Files

The following test output files are **NOT** committed to git (see `.gitignore`):
- `/coverage` - Coverage reports
- `cypress/screenshots` - Screenshot files
- `cypress/videos` - Video files

**Reason**: These files are generated locally and can be large. They should be regenerated when needed.

---

## 4. Understanding Test Results

### 4.1 Coverage Report Interpretation

#### Coverage Metrics

**Statements Coverage**:
- Percentage of code statements executed by tests
- **Target**: 80%+ (Current: 94.49% âœ…)

**Branches Coverage**:
- Percentage of code branches (if/else, switch) executed
- **Target**: 75%+ (Current: 85.4% âœ…)

**Functions Coverage**:
- Percentage of functions called by tests
- **Target**: 80%+ (Current: 83.18% âœ…)

**Lines Coverage**:
- Percentage of code lines executed by tests
- **Target**: 80%+ (Current: 94.49% âœ…)

#### Color Coding in HTML Report

- **Green**: Covered by tests
- **Red**: Not covered by tests
- **Yellow**: Partially covered (some branches covered)

### 4.2 Test Result Interpretation

#### Jest Test Results

**Passing Test**:
```
âœ… PASS tests/components/ChatBox.test.tsx
  âœ“ should render the input and send button
  âœ“ should send a user message and receive assistant reply
```

**Failing Test**:
```
âŒ FAIL tests/pages/api/like-recipe.test.ts
  âœ• shall reject requests that do not use the PUT method
    expect(received).toEqual(expected)
    Expected: "Method GET Not Allowed"
    Received: "Method not allowed"
```

**Snapshot Test**:
```
âœ“ Snapshot test passed
âœ• Snapshot test failed (run with -u to update)
```

#### Cypress Test Results

**Passing Test**:
```
âœ“ Landing page (1234ms)
  âœ“ should display landing page content
```

**Failing Test**:
```
âœ— Recipe creation (5678ms)
  âœ— creates and submits recipes
    Error: Timed out waiting for element
```

---

## 5. Generating Test Reports

### 5.1 Generate Coverage Report

```bash
# Generate coverage report
npm run coverage

# Open coverage report
start coverage/lcov-report/index.html  # Windows
open coverage/lcov-report/index.html   # Mac
xdg-open coverage/lcov-report/index.html  # Linux
```

### 5.2 Generate Test Results with Verbose Output

```bash
# Run tests with verbose output
npm run all_tests -- --verbose

# Run specific test file
npm run all_tests -- tests/components/ChatBox.test.tsx

# Run tests matching a pattern
npm run all_tests -- --testNamePattern="should render"
```

### 5.3 Generate E2E Test Report

```bash
# Run E2E tests
npm run test:e2e

# Run E2E tests with screenshots/videos (after enabling)
npx cypress run --headed  # Run in headed mode
npx cypress run --record  # Record and upload to Cypress Dashboard
```

---

## 6. CI/CD Test Results

### 6.1 GitHub Actions

**Workflow File**: `.github/workflows/e2e.yml`

**Test Results Location**:
- GitHub Actions tab in repository
- Click on workflow run to see results
- View test output in workflow logs

**Coverage Reports**:
- Can be uploaded to Codecov/Coveralls
- Viewable in pull request comments
- Integrated with GitHub status checks

### 6.2 Viewing CI/CD Results

1. Go to GitHub repository
2. Click "Actions" tab
3. Select workflow run
4. View test results in workflow logs
5. Check for coverage reports in artifacts

---

## 7. Quick Reference

### 7.1 Commands

```bash
# Run all tests
npm run all_tests

# Generate coverage report
npm run coverage

# View coverage report
start coverage/lcov-report/index.html  # Windows
open coverage/lcov-report/index.html   # Mac

# Run E2E tests
npm run test:e2e

# Open Cypress interactive runner
npx cypress open

# Run specific test file
npm run all_tests -- tests/components/ChatBox.test.tsx

# Update snapshots
npm run all_tests -- -u
```

### 7.2 File Locations

```
Test Results:
â”œâ”€â”€ coverage/lcov-report/index.html    # Coverage report
â”œâ”€â”€ coverage/lcov.info                 # Coverage data
â”œâ”€â”€ coverage/coverage-final.json       # JSON coverage data
â””â”€â”€ coverage/clover.xml                # XML coverage data

Test Files:
â”œâ”€â”€ tests/                             # Unit tests
â””â”€â”€ cypress/e2e/                       # E2E tests

Snapshot Files:
â””â”€â”€ tests/**/__snapshots__/            # Snapshot test files
```

### 7.3 Coverage Statistics

**Current Coverage** (from last run):
- **Statements**: 94.49% âœ…
- **Branches**: 85.4% âœ…
- **Functions**: 83.18% âœ…
- **Lines**: 94.49% âœ…

**Target Coverage**:
- **Statements**: 80%+ âœ…
- **Branches**: 75%+ âœ…
- **Functions**: 80%+ âœ…
- **Lines**: 80%+ âœ…

---

## 8. Troubleshooting

### 8.1 Coverage Report Not Generated

**Issue**: Coverage report not found

**Solution**:
```bash
# Run coverage command
npm run coverage

# Check if coverage directory exists
ls coverage/lcov-report/index.html
```

### 8.2 Cannot Open Coverage Report

**Issue**: HTML file doesn't open in browser

**Solution**:
```bash
# Windows
start coverage/lcov-report/index.html

# Mac
open coverage/lcov-report/index.html

# Linux
xdg-open coverage/lcov-report/index.html

# Or manually navigate to the file in file explorer
```

### 8.3 Test Results Not Showing

**Issue**: Tests run but no output

**Solution**:
```bash
# Run with verbose output
npm run all_tests -- --verbose

# Check test configuration
cat jest.config.ts
```

### 8.4 Cypress Screenshots Not Generated

**Issue**: No screenshots in `cypress/screenshots/`

**Solution**:
1. Enable screenshots in `cypress.config.ts`:
   ```typescript
   screenshotOnRunFailure: true
   ```
2. Run tests that fail (screenshots only generated on failure)
3. Check `cypress/screenshots/` directory

---

## 9. Summary

### Test Results Available

âœ… **Coverage Reports**: HTML reports in `coverage/lcov-report/index.html`
âœ… **Test Statistics**: Console output when running tests
âœ… **Snapshot Tests**: Files in `tests/**/__snapshots__/`
âš ï¸ **Cypress Screenshots**: Not enabled by default (can be enabled)
âš ï¸ **Cypress Videos**: Not enabled by default (can be enabled)

### How to View Results

1. **Coverage Report**: Open `coverage/lcov-report/index.html` in browser
2. **Test Results**: View in terminal when running tests
3. **E2E Tests**: Use `npx cypress open` for interactive viewing
4. **CI/CD Results**: View in GitHub Actions tab

### Next Steps

1. âœ… Run `npm run coverage` to generate coverage report
2. âœ… Open `coverage/lcov-report/index.html` in browser
3. âœ… Review coverage statistics and file-by-file coverage
4. âš ï¸ Enable Cypress screenshots/videos if needed
5. âœ… Integrate coverage with CI/CD if desired

---

**Last Updated**: Based on current project configuration
**Coverage Report Location**: `coverage/lcov-report/index.html`
**Test Results**: View in terminal when running tests

